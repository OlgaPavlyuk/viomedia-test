parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ZBnv":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"NoOd":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"j9Od":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck")),t=n(require("@babel/runtime/helpers/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var r=function(){function n(){(0,e.default)(this,n),this.data=[],this.info=[],this.error=!1}return(0,t.default)(n,[{key:"bindModelChanged",value:function(e){this.onModelChanged=e}},{key:"bindInfoChanged",value:function(e){this.onInfoChanged=e}},{key:"changeModel",value:function(e){var t=this;this.getData(e).then(function(n){t.error||(t.data=n,t.errror=!1,t.prevUrl=e),t.onModelChanged(n)})}},{key:"changeInfo",value:function(e){var t=this;this.getData(e).then(function(e){t.error||(t.info=e,t.errror=!1),t.onInfoChanged(e)})}},{key:"getData",value:function(e){var t=this;return fetch("https://api.unsplash.com/".concat(e),{headers:{Authorization:"Client-ID 1bfc8daa39d0d2a75494316589ddaa56e6116c7f0a60d1d3f3617d6807a78314"}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){return e}).catch(function(e){return t.error=!0,{error:e}})}}]),n}(),a=r;exports.default=a;
},{"@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/createClass":"NoOd"}],"fk2o":[function(require,module,exports) {
function r(r){if(Array.isArray(r)){for(var e=0,n=new Array(r.length);e<r.length;e++)n[e]=r[e];return n}}module.exports=r;
},{}],"rp83":[function(require,module,exports) {
function t(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}module.exports=t;
},{}],"v5FO":[function(require,module,exports) {
function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}module.exports=e;
},{}],"YtCi":[function(require,module,exports) {
var r=require("./arrayWithoutHoles"),e=require("./iterableToArray"),a=require("./nonIterableSpread");function o(o){return r(o)||e(o)||a()}module.exports=o;
},{"./arrayWithoutHoles":"fk2o","./iterableToArray":"rp83","./nonIterableSpread":"v5FO"}],"k4Dd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var e={COLLECTION_PER_PAGE:100,PHOTOS_PER_PAGE:12};exports.config=e;
},{}],"IYz3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){var o=t.alt_description,c=t.description,s=t.likes,a=void 0===s?0:s,i=t.location,n=t.urls,l=t.tags,e=c?"<h1 class='photo__description'>".concat(c,"</h1>"):"",p=o?"<p class='photo__alt-desription'>".concat(o,"</p>"):"",d=i.city?"<div class='photo__city'>".concat(i.city,"</div>"):"",r="";return l.forEach(function(t){r+="\n      <li class='tag'>".concat(t.title,"</li>\n    ")}),"<div class='photo'>\n      ".concat(e,"\n      <div class='photo__likes'>Likes: ").concat(a,"</div>\n      <div class='photo__wrap'>\n        <img alt='").concat(o||"photo","' src=").concat(n.small," class='photo__img'>\n      </div>\n      ").concat(p,"\n\n      ").concat(d,"\n      <ul class='photo__tags'>Tags: ").concat(r,"</ul>      \n    </div>")},o=t;exports.default=o;
},{}],"kl7y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var c=function(c,o,t){var l="";return c.forEach(function(c){var o=c.id,t=c.color,n=c.description,e=c.urls,a="<li class='collection__item' style='background-color: ".concat(t,"'>\n      <a class='collection__link js-select-photo' href=","photos/".concat(o)," ").concat(n?"title="+n:"",">\n        <img class='collection__photo' alt='").concat(n||"photo","' src=").concat(e.thumb,">\n      </a>      \n    </li>");l+=a}),"<h1 class='title'>Collection ".concat(o,"</h1>\n    <ul class='collection js-collection'>\n      ").concat(l,"\n    </ul>\n    ").concat(t)},o=c;exports.default=o;
},{}],"zKe2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l="";return t.forEach(function(t){var c=t.id,n=t.title,o=t.total_photos,s="<li class='collections-list__item'>\n      <a class='collections-list__link js-select-collection'\n        href=".concat("/collections/".concat(c,"/photos"),"\n        data-title=",n,"\n        data-count=").concat(o,"\n      >\n        ").concat(n," <span class='collections-list__count'>(").concat(o,")</span>\n      </a>      \n    </li>");l+=s}),"<div class='collections'>\n        <h1 class='title'>Collections list</h1>\n        <ul class='collections-list js-collections-list'>\n          ".concat(l,"\n        </ul>\n        ").concat(c,"\n    </div>")},c=t;exports.default=c;
},{}],"PIX2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t,a,n){var o,c,e,i=Math.ceil(+t/+n),s="",d=+a;return 1===d?(o="disabled",c=1,e=2):d===i?(s="disabled",e=i,c=d-1):(e=d+1,c=d-1),"<div class='pagination'>\n      <span class='pagination__info'>page ".concat(d," of ").concat(i,"</span>\n      <button class='btn pagination__btn' ").concat(o," data-page='").concat(c,"'>Previous ").concat(n,"</button>      \n      <button class='btn pagination__btn' ").concat(s," data-page='").concat(e,"'>Next ").concat(n,"</button>\n    </div>\n  ")},a=t;exports.default=a;
},{}],"WlVP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,a){var c=e?"<a class='breadcrumbs__link' href='".concat(e,"'>Collection ").concat(a,"</a>"):"";return"<nav class='breadcrumbs'>\n      <a class='breadcrumbs__link' href='/collections?per_page=100'>Collections</a>\n      ".concat(c,"\n    </nav>")},a=e;exports.default=a;
},{}],"oYWn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("@babel/runtime/helpers/toConsumableArray")),e=r(require("@babel/runtime/helpers/classCallCheck")),i=r(require("@babel/runtime/helpers/createClass")),n=require("./helpers"),o=r(require("./Views/Photo")),a=r(require("./Views/Collection")),s=r(require("./Views/CollectionsList")),l=r(require("./Views/Pagination")),c=r(require("./Views/Breadcrumbs"));function r(t){return t&&t.__esModule?t:{default:t}}var h=[{path:"collections",template:"collectionsList"},{path:"collections/:id/photos",template:"collection"},{path:"collections/:id/photos/:id",template:"photo"}],u=function(){function r(){var t=this;(0,e.default)(this,r),this._selectCollection=function(e){e.preventDefault();var i=e.target.closest(".js-select-collection");if(i){t.title=i.dataset.title||"",t.photosCount=i.dataset.count;var o="".concat(i.getAttribute("href"),"?page=").concat(t.currentPage,"&per_page=").concat(n.config.PHOTOS_PER_PAGE);t.changeRoute(o)}},this._selectPhoto=function(e){e.preventDefault();var i=e.target.closest(".js-select-photo");i&&(t.breadcrumbs.innerHTML=(0,c.default)(history.state.url,t.title),t.changeRoute(i.getAttribute("href")))},this._paginateCollection=function(e){e.preventDefault();var i=e.target.dataset.page;t.currentPage=i;var o="".concat(location.pathname,"?page=").concat(i,"&per_page=").concat(n.config.PHOTOS_PER_PAGE);t.changeRoute(o)},this._breadcrumbsNavigation=function(e){e.preventDefault();var i=e.target;"A"===i.tagName&&t.changeRoute(i.getAttribute("href"))},this.app=this.getElement("#root"),this.container=this.createElement("section",["container"]),this.displayWrapper=this.createElement("div",["wrapper"]),this.breadcrumbs=this.createElement("nav",["breadcrumbs"]),this.paginationBtns="",this.collectionsList="",this.collection="",this.photo="",this.title="",this.photosCount="",this.currentPage=1}return(0,i.default)(r,[{key:"init",value:function(){var t=this;this.app.append(this.container),this.container.append(this.displayWrapper),this.container.prepend(this.breadcrumbs),this.breadcrumbs.addEventListener("click",this._breadcrumbsNavigation),this.initRender(),window.addEventListener("popstate",function(e){t.changeRoute(document.location.pathname+document.location.search,!1)})}},{key:"bindInitCollectionInfo",value:function(t){this.getInformation=t}},{key:"bindRouteChange",value:function(t){this.onChangedRoute=t}},{key:"setInfo",value:function(t){var e=t.title,i=t.total_photos;this.title=e,this.photosCount=i}},{key:"initRender",value:function(){var t="/"!==document.location.pathname?document.location.pathname+document.location.search:"/collections?per_page=100";if("collection"===this._matchUrlToRoute().template&&""===this.title&&""===this.photosCount){var e=t.split("/")[2];this.getInformation("/collections/".concat(e))}this.changeRoute(t)}},{key:"changeRoute",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.onChangedRoute(t),e&&history.pushState({url:t},"",t),this.displayWrapper.classList.add("loading")}},{key:"_matchUrlToRoute",value:function(){var t=(window.location.pathname.slice(1).toLowerCase()||"/").split("/");return h.find(function(e){var i=e.path.split("/");return i.length===t.length&&i.every(function(e,i){return e===t[i]||":"===e[0]})})}},{key:"renderView",value:function(t){t.error&&this._displayError(t.error),this.displayWrapper.classList.remove("loading");var e=this._matchUrlToRoute(),i="";switch(e&&(i=e.template),i){case"collectionsList":this._displayCollections(t);break;case"collection":this._displayCollection(t);break;case"photo":this._displayPhoto(t);break;default:this._displayError()}}},{key:"getElement",value:function(t){return document.querySelector(t)}},{key:"createElement",value:function(e,i){var n,o=document.createElement(e);return i&&(n=o.classList).add.apply(n,(0,t.default)(i)),o}},{key:"_displayCollections",value:function(t){this.collectionList&&this.collectionList.removeEventListener("click",this._selectPhoto),this.collectionsList&&this.collectionsList.removeEventListener("click",this._selectCollection),this.currentPage=1;var e=(0,s.default)(t);this.displayWrapper.innerHTML=e,this.collectionsList=this.getElement(".js-collections-list"),this.collectionsList.addEventListener("click",this._selectCollection)}},{key:"_displayCollection",value:function(t){var e=this;this.collectionsList&&this.collectionsList.removeEventListener("click",this._selectCollection),this.breadcrumbs.innerHTML=(0,c.default)();var i=this.photosCount>n.config.PHOTOS_PER_PAGE?(0,l.default)(this.photosCount,this.currentPage,n.config.PHOTOS_PER_PAGE):"";this.displayWrapper.innerHTML=(0,a.default)(t,this.title,i),this.collectionList=this.getElement(".js-collection"),this.collectionList.addEventListener("click",this._selectPhoto),this.paginationBtns=document.querySelectorAll(".btn[data-page]"),this.paginationBtns.forEach(function(t){t.addEventListener("click",e._paginateCollection)})}},{key:"_displayPhoto",value:function(t){var e=this;this.currentPage=1,this.paginationBtns&&this.paginationBtns.forEach(function(t){t.addEventListener("click",e._paginateCollection)}),this.collectionList&&this.collectionList.removeEventListener("click",this._selectPhoto),this.displayWrapper.innerHTML=(0,o.default)(t)}},{key:"_displayError",value:function(t){this.displayWrapper.innerHTML="Something went wrong ".concat(t)}}]),r}(),p=u;exports.default=p;
},{"@babel/runtime/helpers/toConsumableArray":"YtCi","@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/createClass":"NoOd","./helpers":"k4Dd","./Views/Photo":"IYz3","./Views/Collection":"kl7y","./Views/CollectionsList":"zKe2","./Views/Pagination":"PIX2","./Views/Breadcrumbs":"WlVP"}],"I0Xq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck"));function n(e){return e&&e.__esModule?e:{default:e}}var i=function n(i,t){var d=this;(0,e.default)(this,n),this.handleChangedModel=function(e){d.view.renderView(e)},this.handleChangedInfo=function(e){d.view.setInfo(e)},this.listenRouteChanged=function(e){d.model.changeModel(e)},this.listenInfoChanged=function(e){d.model.changeInfo(e)},this.model=i,this.view=t,this.model.bindModelChanged(this.handleChangedModel),this.view.bindRouteChange(this.listenRouteChanged),this.model.bindInfoChanged(this.handleChangedInfo),this.view.bindInitCollectionInfo(this.listenInfoChanged),this.view.init()},t=i;exports.default=t;
},{"@babel/runtime/helpers/classCallCheck":"ZBnv"}],"Focm":[function(require,module,exports) {
"use strict";var e=s(require("./src/js/Model")),r=s(require("./src/js/View")),u=s(require("./src/js/Controller"));function s(e){return e&&e.__esModule?e:{default:e}}var t=new u.default(new e.default,new r.default);
},{"./src/js/Model":"j9Od","./src/js/View":"oYWn","./src/js/Controller":"I0Xq"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map