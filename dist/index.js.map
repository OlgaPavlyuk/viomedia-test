{"version":3,"sources":["node_modules/@babel/runtime/helpers/classCallCheck.js","node_modules/@babel/runtime/helpers/createClass.js","src/js/Model.js","node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","node_modules/@babel/runtime/helpers/iterableToArray.js","node_modules/@babel/runtime/helpers/nonIterableSpread.js","node_modules/@babel/runtime/helpers/toConsumableArray.js","src/js/helpers.js","src/js/Views/Photo.js","src/js/Views/Collection.js","src/js/Views/CollectionsList.js","src/js/Views/Pagination.js","src/js/Views/Breadcrumbs.js","src/js/View.js","src/js/Controller.js","index.js"],"names":["Model","data","info","error","callback","onModelChanged","onInfoChanged","url","getData","then","errror","prevUrl","fetch","headers","response","ok","Error","status","json","jsondata","catch","config","COLLECTION_PER_PAGE","PHOTOS_PER_PAGE","Photo","alt_description","description","likes","location","urls","tags","descriptionElem","altDescriptionElem","cityInfo","city","tagsList","forEach","tag","title","small","Collection","pagination","list","photo","id","color","li","thumb","CollectionsList","collection","total_photos","Pagination","count","currentPage","perPage","totalPages","prevDisabled","prevPage","nextPage","Math","ceil","nextDisabled","current","Breadcrumbs","href","collectionLink","View","routes","path","template","_selectCollection","e","preventDefault","target","link","closest","dataset","photosCount","getAttribute","changeRoute","_selectPhoto","breadcrumbs","innerHTML","history","state","_paginateCollection","gotoPage","page","pathname","_breadcrumbsNavigation","tagName","app","getElement","container","createElement","displayWrapper","paginationBtns","collectionsList","append","prepend","addEventListener","initRender","window","document","search","getInformation","onChangedRoute","initPath","currentRoute","_matchUrlToRoute","split","updateState","pushState","classList","add","currentUrl","segmentsUrl","slice","toLowerCase","matchedRoute","find","route","routePathSegments","length","every","routePathSegment","i","_displayError","remove","currentTemplate","_displayCollections","_displayCollection","_displayPhoto","selector","element","querySelector","classNames","collectionList","removeEventListener","collections","querySelectorAll","btn","Controller","model","view","handleChangedModel","renderView","handleChangedInfo","setInfo","listenRouteChanged","changeModel","listenInfoChanged","changeInfo","bindModelChanged","bindRouteChange","bindInfoChanged","bindInitCollectionInfo","init"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","class Model {\r\n  constructor() {\r\n    this.data = [];\r\n    this.info = [];\r\n    this.error = false;\r\n  }\r\n\r\n  bindModelChanged(callback) {\r\n    this.onModelChanged = callback;\r\n  }\r\n\r\n  bindInfoChanged(callback) {\r\n    this.onInfoChanged = callback;\r\n  }\r\n\r\n  changeModel(url) {\r\n    this.getData(url)\r\n      .then((data) => {\r\n        if (!this.error) {\r\n          this.data = data;\r\n          this.errror = false;\r\n          this.prevUrl = url;\r\n        }\r\n        this.onModelChanged(data);\r\n      }); \r\n  }\r\n\r\n  changeInfo(url) {\r\n    this.getData(url)\r\n      .then((data) => {\r\n        if (!this.error) {\r\n          this.info = data;\r\n          this.errror = false;\r\n        }\r\n        this.onInfoChanged(data);\r\n      });\r\n  }\r\n\r\n  getData(url) {\r\n    const api_key = '1bfc8daa39d0d2a75494316589ddaa56e6116c7f0a60d1d3f3617d6807a78314';\r\n    return fetch(`https://api.unsplash.com/${url}`, {\r\n      headers: {\r\n        'Authorization': 'Client-ID ' + api_key\r\n      }\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) throw new Error(response.status);\r\n        return response.json()\r\n      })\r\n      .then(jsondata => jsondata)\r\n      .catch(error => {\r\n        this.error = true;\r\n        return {error};\r\n      });\r\n  }\r\n}\r\n\r\nexport default Model;\r\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","export const config = {\r\n  COLLECTION_PER_PAGE: 100,\r\n  PHOTOS_PER_PAGE: 12,\r\n};\r\n","const Photo = (data) => {\r\n  const { alt_description, description, likes = 0, location, urls, tags } = data;\r\n\r\n  const descriptionElem = description ? `<h1 class='photo__description'>${description}</h1>` : '';\r\n  const altDescriptionElem= alt_description ? `<p class='photo__alt-desription'>${alt_description}</p>` : '';\r\n  const cityInfo = location.city ? `<div class='photo__city'>${location.city}</div>` : '';\r\n\r\n  let tagsList = '';\r\n  tags.forEach((tag) => {\r\n    tagsList += `\r\n      <li class='tag'>${tag.title}</li>\r\n    `;\r\n  });\r\n\r\n  return (\r\n    `<div class='photo'>\r\n      ${descriptionElem}\r\n      <div class='photo__likes'>Likes: ${likes}</div>\r\n      <div class='photo__wrap'>\r\n        <img alt='${alt_description || \"photo\"}' src=${urls.small} class='photo__img'>\r\n      </div>\r\n      ${altDescriptionElem}\r\n\r\n      ${cityInfo}\r\n      <ul class='photo__tags'>Tags: ${tagsList}</ul>      \r\n    </div>`\r\n  );\r\n}\r\n\r\nexport default Photo;\r\n","const Collection = (data, title, pagination) => {\r\n\r\n  let list = '';\r\n  data.forEach((photo) => {\r\n    const { id, color, description, urls } = photo;\r\n\r\n    const li = `<li class='collection__item' style='background-color: ${color}'>\r\n      <a class='collection__link js-select-photo' href=${`photos/${id}`} ${description ? 'title=' + description : ''}>\r\n        <img class='collection__photo' alt='${description || \"photo\"}' src=${urls.thumb}>\r\n      </a>      \r\n    </li>`;\r\n    list += li;\r\n  });\r\n\r\n  return `<h1 class='title'>Collection ${title}</h1>\r\n    <ul class='collection js-collection'>\r\n      ${list}\r\n    </ul>\r\n    ${pagination}`;\r\n};\r\n\r\nexport default Collection;","const CollectionsList = (data, pagination = '') => {\r\n  let list = '';\r\n  data.forEach((collection) => {\r\n    const { id, title, total_photos } = collection;\r\n    \r\n    const li = `<li class='collections-list__item'>\r\n      <a class='collections-list__link js-select-collection'\r\n        href=${`/collections/${id}/photos`}\r\n        data-title=${title}\r\n        data-count=${total_photos}\r\n      >\r\n        ${title} <span class='collections-list__count'>(${total_photos})</span>\r\n      </a>      \r\n    </li>`;\r\n    list += li;\r\n  });\r\n\r\n  return `<div class='collections'>\r\n        <h1 class='title'>Collections list</h1>\r\n        <ul class='collections-list js-collections-list'>\r\n          ${list}\r\n        </ul>\r\n        ${pagination}\r\n    </div>`\r\n  ;\r\n};\r\n\r\nexport default CollectionsList;\r\n","\r\nconst Pagination = (count, currentPage, perPage) => {\r\n  const totalPages = Math.ceil(+count / +perPage);\r\n  let prevDisabled, nextDisabled = '';\r\n  let prevPage, nextPage;\r\n  const current = +currentPage;\r\n\r\n  // first page\r\n  if (current === 1) {\r\n    prevDisabled = 'disabled';\r\n    prevPage = 1;\r\n    nextPage = 2;\r\n  } else if (current === totalPages) { // last page\r\n    nextDisabled = 'disabled';\r\n    nextPage = totalPages;\r\n    prevPage = current - 1;\r\n  } else {\r\n    nextPage = current + 1;\r\n    prevPage = current - 1;\r\n  }\r\n\r\n  return `<div class='pagination'>\r\n      <span class='pagination__info'>page ${current} of ${totalPages}</span>\r\n      <button class='btn pagination__btn' ${prevDisabled} data-page='${prevPage}'>Previous ${perPage}</button>      \r\n      <button class='btn pagination__btn' ${nextDisabled} data-page='${nextPage}'>Next ${perPage}</button>\r\n    </div>\r\n  `;\r\n};\r\n\r\nexport default Pagination;\r\n","const Breadcrumbs = (href, title) => {\r\n  const collectionLink = href\r\n    ? `<a class='breadcrumbs__link' href='${href}'>Collection ${title}</a>`\r\n    : '';\r\n  \r\n  return `<nav class='breadcrumbs'>\r\n      <a class='breadcrumbs__link' href='/collections?per_page=100'>Collections</a>\r\n      ${collectionLink}\r\n    </nav>`\r\n    ;\r\n};\r\n\r\nexport default Breadcrumbs;\r\n","import { config } from './helpers';\r\nimport Photo from './Views/Photo';\r\nimport Collection from './Views/Collection';\r\nimport CollectionsList from './Views/CollectionsList';\r\nimport Pagination from './Views/Pagination';\r\nimport Breadcrumbs from './Views/Breadcrumbs';\r\n\r\nconst routes = [\r\n  {\r\n    path: 'collections',\r\n    template: 'collectionsList'\r\n  },\r\n  {\r\n    path: 'collections/:id/photos',\r\n    template: 'collection'\r\n  },\r\n  {\r\n    path: 'collections/:id/photos/:id',\r\n    template: 'photo'\r\n  }\r\n];\r\n\r\nclass View {\r\n  constructor() {\r\n    this.app = this.getElement('#root');\r\n    this.container = this.createElement('section', ['container']);\r\n    this.displayWrapper = this.createElement('div', ['wrapper']);\r\n\r\n    this.breadcrumbs = (this.createElement('nav', ['breadcrumbs']));\r\n    this.paginationBtns = '';\r\n    this.collectionsList = '';\r\n    this.collection = '';\r\n    this.photo = '';\r\n    this.title = '';\r\n    this.photosCount = '';\r\n    this.currentPage = 1;\r\n  }\r\n\r\n  init() {\r\n    this.app.append(this.container);\r\n    this.container.append(this.displayWrapper);\r\n    this.container.prepend(this.breadcrumbs);\r\n    this.breadcrumbs.addEventListener('click', this._breadcrumbsNavigation);\r\n\r\n    this.initRender();\r\n\r\n    window.addEventListener('popstate', (e) => {\r\n      this.changeRoute(document.location.pathname + document.location.search, false);\r\n    });\r\n  }\r\n\r\n  bindInitCollectionInfo(callback) {\r\n    this.getInformation = callback;\r\n  }\r\n\r\n  bindRouteChange(callback) {\r\n    this.onChangedRoute = callback;\r\n  }\r\n\r\n  setInfo(data) {\r\n    const { title, total_photos } = data;\r\n    this.title = title;\r\n    this.photosCount = total_photos;\r\n  }\r\n\r\n  initRender() {\r\n    const initPath = document.location.pathname !== '/'\r\n      ? document.location.pathname + document.location.search\r\n      : '/collections?per_page=100';\r\n\r\n    const currentRoute = this._matchUrlToRoute();\r\n\r\n    if (currentRoute.template === 'collection' && this.title === '' && this.photosCount === '') {\r\n      const id = initPath.split('/')[2];\r\n      this.getInformation(`/collections/${id}`);\r\n    }\r\n\r\n    this.changeRoute(initPath);\r\n  }\r\n\r\n  changeRoute(url, updateState = true) {\r\n    this.onChangedRoute(url);\r\n    if (updateState) history.pushState({ url }, '', url);\r\n    this.displayWrapper.classList.add('loading');\r\n  }\r\n\r\n  _matchUrlToRoute() {\r\n    const currentUrl = window.location.pathname.slice(1).toLowerCase() || '/';\r\n    const segmentsUrl = currentUrl.split('/');\r\n    const matchedRoute = routes.find((route) => {\r\n      const routePathSegments = route.path.split('/');\r\n      if (routePathSegments.length !== segmentsUrl.length) {\r\n        return false;\r\n      }\r\n\r\n      const match = routePathSegments.every((routePathSegment, i) => {\r\n        return routePathSegment === segmentsUrl[i] || routePathSegment[0] === ':';\r\n      });\r\n\r\n      return match;\r\n    });\r\n\r\n    return matchedRoute;\r\n  }\r\n\r\n  renderView(data) {\r\n    if (data.error) {\r\n      this._displayError(data.error);\r\n    }\r\n    this.displayWrapper.classList.remove('loading');\r\n    const currentRoute = this._matchUrlToRoute();\r\n    let currentTemplate = '';\r\n    if (currentRoute) {\r\n      currentTemplate = currentRoute.template;\r\n    }\r\n    switch (currentTemplate) {\r\n      case 'collectionsList':\r\n        this._displayCollections(data);\r\n        break;\r\n      case 'collection':\r\n        this._displayCollection(data);\r\n        break;\r\n      case 'photo':\r\n        this._displayPhoto(data);\r\n        break;\r\n      default:\r\n        this._displayError();\r\n    }\r\n  }\r\n\r\n  _selectCollection = (e) => {\r\n    e.preventDefault();\r\n    const { target } = e;\r\n    const link = target.closest('.js-select-collection');\r\n    if (link) {\r\n      this.title = link.dataset.title || '';\r\n      this.photosCount = link.dataset.count;\r\n      const url = `${link.getAttribute('href')}?page=${this.currentPage}&per_page=${config.PHOTOS_PER_PAGE}`;\r\n      this.changeRoute(url);\r\n    }\r\n  }\r\n\r\n  _selectPhoto = (e) => {\r\n    e.preventDefault();\r\n    const { target } = e;\r\n    const link = target.closest('.js-select-photo');\r\n    if (link) {\r\n      this.breadcrumbs.innerHTML = Breadcrumbs(history.state.url, this.title);\r\n      this.changeRoute(link.getAttribute('href'));      \r\n    }\r\n  }\r\n\r\n  _paginateCollection = (e) => {\r\n    e.preventDefault();\r\n    const { target } = e;\r\n    const gotoPage = target.dataset.page;\r\n    this.currentPage = gotoPage;\r\n    const url = `${location.pathname}?page=${gotoPage}&per_page=${config.PHOTOS_PER_PAGE}`;\r\n    this.changeRoute(url);\r\n  }\r\n\r\n  _breadcrumbsNavigation = (e) => {\r\n    e.preventDefault();\r\n    const { target } = e;\r\n    if (target.tagName === 'A') {\r\n      this.changeRoute(target.getAttribute('href'));\r\n    }\r\n  }\r\n\r\n  getElement(selector) {\r\n    const element = document.querySelector(selector);\r\n    return element;\r\n  }\r\n\r\n  createElement(tag, classNames) {\r\n    const element = document.createElement(tag);\r\n    if (classNames) element.classList.add(...classNames);\r\n    return element;\r\n  }\r\n\r\n  _displayCollections(data) {\r\n    if (this.collectionList) this.collectionList.removeEventListener('click', this._selectPhoto);\r\n    if (this.collectionsList) this.collectionsList.removeEventListener('click', this._selectCollection);\r\n\r\n    this.currentPage = 1;\r\n    const collections = CollectionsList(data);\r\n    this.displayWrapper.innerHTML = collections;\r\n\r\n    this.collectionsList = this.getElement('.js-collections-list');\r\n    this.collectionsList.addEventListener('click', this._selectCollection);\r\n  }\r\n\r\n  _displayCollection(data) {\r\n    if (this.collectionsList) this.collectionsList.removeEventListener('click', this._selectCollection);\r\n    \r\n    this.breadcrumbs.innerHTML = Breadcrumbs();\r\n\r\n    const pagination = (this.photosCount > config.PHOTOS_PER_PAGE)\r\n      ? Pagination(this.photosCount, this.currentPage, config.PHOTOS_PER_PAGE)\r\n      : '';\r\n    \r\n    this.displayWrapper.innerHTML = Collection(data, this.title, pagination);\r\n    this.collectionList = this.getElement('.js-collection');\r\n    this.collectionList.addEventListener('click', this._selectPhoto); \r\n\r\n    this.paginationBtns = document.querySelectorAll('.btn[data-page]');\r\n    this.paginationBtns.forEach((btn) => {\r\n      btn.addEventListener('click', this._paginateCollection); \r\n    });\r\n\r\n  }\r\n\r\n  _displayPhoto(data) {\r\n    this.currentPage = 1;\r\n    if (this.paginationBtns) this.paginationBtns.forEach((btn) => {\r\n      btn.addEventListener('click', this._paginateCollection);\r\n    }); \r\n    if (this.collectionList) this.collectionList.removeEventListener('click', this._selectPhoto);  \r\n    this.displayWrapper.innerHTML = Photo(data);\r\n  }\r\n\r\n  _displayError(error) {\r\n    this.displayWrapper.innerHTML = `Something went wrong ${error}`;\r\n  }\r\n}\r\n\r\nexport default View;\r\n","class Controller {\r\n  constructor(model, view) {\r\n    this.model = model,\r\n    this.view = view,\r\n    this.model.bindModelChanged(this.handleChangedModel);\r\n    this.view.bindRouteChange(this.listenRouteChanged);\r\n    this.model.bindInfoChanged(this.handleChangedInfo);\r\n    this.view.bindInitCollectionInfo(this.listenInfoChanged);\r\n\r\n    this.view.init();\r\n  }\r\n\r\n  handleChangedModel = (data) => {\r\n    this.view.renderView(data);\r\n  }\r\n\r\n  handleChangedInfo = (data) => {\r\n    this.view.setInfo(data);\r\n  }\r\n\r\n  listenRouteChanged = (url) => {\r\n    this.model.changeModel(url);\r\n  }\r\n\r\n  listenInfoChanged = (url) => {\r\n    this.model.changeInfo(url);\r\n  }\r\n}\r\n\r\nexport default Controller;","import Model from './src/js/Model';\r\nimport View from './src/js/View';\r\nimport Controller from './src/js/Controller';\r\n\r\nconst app = new Controller(new Model(), new View());\r\n"]}